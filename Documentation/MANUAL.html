<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Tahchee Manual</title>
<style><!-- 
body {
	margin-left: 10%;
	margin-right: 10%;
	padding: 20pt;
	padding-top: 10pt;
	background: rgb(255,255,255);
	font:  10.5pt/15pt "Helvetica",Helvetica,sans-serif;
	color: rgb(80,80,80);
}

h1, h2, h3, h4 {
	font-family: "Trebuchet MS",Helvetica,sans-serif;
	color: rgb(22, 130, 178);
	font-weight: normal;
	padding-top: 0.5em;
	cursor: pointer;
}

hr {
	color: rgb(150, 220, 238);
	background: rgb(150, 220, 238);
	height: 1px;
	border: 0;
}


b {
	color: rgb(22,130,178);
}

strong {
	color: rgb(103,183,0);
}


a:link, a:active, a:visited {
	color: rgb(22,130,178);
	text-decoration: none;
}

a:hover {
	text-decoration: none;
	background-color: #dbecf4;
}

aimg {
	border: 0;
}

#header, #footer {
	font-size: 7pt;
	clear: both;
	width: 100%;
	color: rgb(177,208,223);
}

.kiwiContent {
	text-align: left;
}


#footer {
	padding-top:  30pt;
	text-align: right;
}

/*  Kiwi-specific  */

.title {
	margin-bottom: 0;
}

.kiwiMeta {
	max-width: 700px;
	padding: 5pt;
	margin-bottom:  2em;
	border-top:  1px solid rgb(150, 220, 238);
	background-color: rgb(250,250,250);
}

.kiwiMeta tr td {
	color: rgb(22, 130, 178);
}

.kiwiMeta tr td.name {
	font-weight: bold;
}

.kiwiContent {
	max-width: 700px;
}

.kiwiContent .heading .number {
	padding-right: 8pt;
}

.kiwiContent .heading .number .lastDot {
	display: none;
}


.kiwiContent .heading .number .level0 .lastDot {
	display: inline;
}

.kiwiContent h1 {
	font-size: 1.8em;
	font-weight: bold;
	margin-top: 1.5em;
	padding-bottom: 0.5em;
	border-bottom:  1px dotted rgb(150, 220, 238);
}

.kiwiContent h2 {
	font-size: 1.4em;
	font-weight: bold;
	padding-bottom: 0.5em;
	border-bottom:  1px dotted rgb(150, 220, 238);
}

.kiwiContent h3 {
	font-size: 1.2em;
	font-weight: normal;
}

.kiwiContent pre {
	padding: 5pt;
	border:  1px solid rgb(150, 220, 238);
	padding-left: 20pt;
	background-color: rgb(240,240,250);
	font-size: 8pt;
	color: rgb(22,130,178);
}

.kiwiContent code {
	font-size: 8pt;
	background-color: rgb(240,240,250);
}

.kiwiContent dt {
	color: rgb(22,130,178);
	font-weight: bold;
}

.kiwiContent dd {
	border-left:  1px solid rgb(150, 220, 238);
	padding-left: 20pt;
	margin-bottom: 2em;
}

.kiwiContent dd pre {
}

.kiwiContent ul {
	padding-top: 0em;
	margin-top: 0em;
}

.kiwiContent ul li {
	padding-bottom: 0.2em;
}

.kiwiContent ul li.todo {
	list-style-type: square;
}

.kiwiContent ul li.todo.done {
	text-decoration: line-through;
}

.kiwiContent table {
	border:  1px solid rgb(150, 220, 238);
	padding: 0pt;
}

.kiwiContent table caption {
	font-family: serif;
	padding-top: 1em;
	padding-bottom: 0.5em;
	font-style: italic;
	font-size: 90%;
	color: rgb(22, 130, 178);
}

.kiwiContent table tbody {
}

.kiwiContent table tr {
	margin: 0;
}

.kiwiContent table tr td {
	margin: 0;
	padding: 5pt;
	font-size: 90%;
	min-width: 125px;
	background-color: rgb(250,250,250);
	border-bottom: 1px solid rgb(150, 220, 238);
}

.kiwiContent table tr td.lastRow {
	border-bottom: none;
}

.kiwiContent table tr td.lastCol {
	border-right: none;
}

.kiwiContent table tr.even td {
	background-color: #FEFEFE;

}

.kiwiContent table tr.odd td {
	background-color: rgb(240,240,240);
}

.kiwiContent .term {
	color: rgb(22, 130, 178);
	background: rgb(240, 250, 256);
}

.kiwiContent .quote {
	font-style: italic;
	color: rgb(120, 120, 120);
}

.kiwiContent .citation {
	font-style: italic;
	color: rgb(120, 120, 120);
}

.kiwiContent div[class^="ann"] {
	margin-top: 5pt;
	margin-bottom: 5pt;
	padding: 5pt;
	padding-left: 20pt;
	color: rgb(100, 100, 100);
}

.kiwiContent div[class^="ann"] .title {
	font-weight: bold;
}

.kiwiContent .annNote {
	border:  1px solid rgb(103,183,0);
	margin-top: 5pt;
	margin-bottom: 5pt;
	padding: 5pt;
	padding-left: 20pt;
	background: #fffbe4;
	color: rgb(100, 100, 100);
	border:  1px solid #dedac3;
}

.kiwiContent .annNote .title {
	font-weight: bold;
	display: none;
}

.kiwiReferences {
	font:  8pt/12pt "Lucida Grande",Lucida,sans-serif;
	margin-top: 10pt;
	padding: 5pt;
	border-top:  1px solid rgb(200, 200, 200);
	background-color: rgb(250,250,250);
	color: rgb(200, 200, 200);
	font-size: 8pt;
}
.kiwiReferences a:link, .kiwiReferences a:active, .kiwiReferences a:visited {
	color: rgb(150,150,150);
}

.kiwiReferences .entry {
	padding-top: 5pt;
	clear: both;
}

.kiwiReferences .entry .name {
	float: left;
	font-weight: bold;
	padding-right: 5pt;
}

.kiwiReferences .entry .content {
	text-align: right;
}

 --></style>
</head>
<body>
<div
	class="title"><h1>Tahchee Manual</h1></div><table class='kiwiMeta'><tr><td width='0px' class='name'>Author</td><td width='100%' class='value'>Sébastien Pierre</td></tr><tr><td width='0px' class='name'>Version</td><td width='100%' class='value'>0.9.8</td></tr></table>
<div class="kiwiContent"><div class='content'><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">1<span class="lastDot dot">.</span></span></span>Quick setup</h1><div class="level1"><p>First, you will need a Unix-based machine, or a Windows machine with an available shell (using MinGW or Cygwin), with Python 2.4+ installed.</p><ul><li><a href="http://www.ivy.fr/tahchee" class="external">Download Tahchee</a>, and decompress the tarball </li><li>Ensure that <a href="http://www.cheetahtemplate.org" class="external">Cheetah</a> (starting from version 0.9.7) is installed </li><li>Optionally install the <a href="http://www.pythonware.com/products/pil/" class="external">Python Imaging Library</a> (PIL) </li><li>Optionally install <a href="http://www.w3.org/People/Raggett/tidy/" class="external">HTML tidy</a></li></ul><p>Once this preliminary setup is done, go into the uncompressed Tahchee directory and do</p><pre>python setup.py install</pre><p>You now have the <code>tahchee</code> command available in your path, and should be ready to start using Tahchee.</p><div class='annNote'><div class='title'>note</div><div class='content'></div></div><p>You can alternatively install Tahchee by copying the <code>tahchee</code> directory within the <code>Sources</code> directory of Tahchee within your Python <code>site-packages</code> directory, and running tahchee with the following command: <code>python -c "import sys, tahchee.main ; tahchee.main.run(sys.argv[1:])"</code></p></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">2<span class="lastDot dot">.</span></span></span>First run</h1><div class="level1"><p>To test your installation, go into Tahchee <code>Documentation/Example</code> directory and type <code>make</code>. The process should run, and output lines similar to those lines:</p><pre>[ ] Mode is 'local', generating in 'Site/Local'
[ ] Precompiling template 'Example/Templates/Base'
[ ] Precompiling template 'Example/Templates/Page'
[ ] Generating file 'index.html'</pre><p>This process will create the example HTML site in the <code>Site/Local</code> subdirectory. You will find the resulting HTML there. If you want to know what other options are available, type <code>make info</code>.</p></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">3<span class="lastDot dot">.</span></span></span>How the stuff works</h1><div class="level1"><p>Tahchee is best described as a "website compiler". You design your site with <span class='term'>templates</span>, which contain the common parts between all your pages in your website. Once you have written your templates, you can start writing <span class='term'>pages</span> which &ldquo;<span class='quote'>fill in the blanks</span>&rdquo; of your templates. The main difference between a template and a page is that a template needs the data provided by a page to render to an HTML (or whatever format) file. In other words, templates are incomplete pages, and pages complete templates.</p><p>To get a better idea of this, let's look at the example data:</p><pre>|-- Pages
|   |-- index.html.tmpl
|   `-- screen.css
|-- Site
|-- Templates
|   |-- Base.tmpl
|   `-- Page.tmpl</pre><p>Running <code>make</code> will populate your website project directory:</p><pre>|-- Pages
|   |-- index.html.tmpl
|   `-- screen.css
|-- Site
|   `-- Local                 (this is the directory created by tahchee)
|       |-- index.html
|       `-- screen.css
|-- Templates
|   |-- Base.py               (these are 'compiled' versions of your templates)
|   |-- Base.tmpl
|   |-- Page.py
|   |-- Page.tmpl
|   |-- __init__.py</pre><p>We see that the <code>Site/Local</code> was populated with the same content as the <code>Pages</code> directory, excepted files ending in <code>.tmpl</code> were stripped of their extension. Before being stripped of their extensions, the <code>.tmpl</code> files were actually processed with Tahchee to generate the resulting file (which can be HTML, or any other file, such as CSS, PHP, etc).</p><p>There are also some <code>.py</code> files in the <code>Templates</code> directory, which are the result of Cheetah compiling the templates files (<code>.tmpl</code>) in the <code>Templates</code> directory into executable Python code.</p><p>Tahchee works as follows:</p><ul><li>Compiles the <code>tmpl</code> files in the <code>Templates</code> directory </li><li>Compiles the <code>tmpl</code> files in the <code>Pages</code> directory and copies them in the <code>Site/Local</code> subdirectory, stripping them of the <code>tmpl</code> extension </li><li>Copies other files from <code>Pages</code> to the appropriate location in the <code>Site/Local</code> directory.</li></ul></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">4<span class="lastDot dot">.</span></span></span>More about templates</h1><div class="level1"><p>You can learn the basics of using templates simply by looking at the files in the example. You will see that in our example, we have a template hierarchy:</p><pre>Base
`-- Page
    `-- index.html</pre><p>This means that a change in <code>Base</code> will affect <code>Page</code> as well as 'index.html`. By making new templates that "extend" other templates, you can build a whole set of specific templates for your site sections:</p><pre>Base
`-- Page
    `-- SectionPage
        |-- FAQPage
        |-- UserPage
        `-- ProjectPage</pre><p>If you look closer at the provided templates, you will see that some variables (like <code>$site</code>) are already available. Tahchee actually provides access to Python object representing the current page and the website as a whole, using the following keywords:</p><ul><li><code>$page</code> refers to the current page, and is a Page object </li><li><code>$site</code> refers to the current site, and is a Site object</li></ul><p>The Page and Site objects are defined in the Tahchee Python API, available with this documentation (see <code>Documentation/tahchee-api.html</code>). For instance, the 'site' object provides a <code>link</code> method that allows to link to a path or URL, and ensure that the link target exists.</p><p>Since Tahchee 0.9.7 a plugin system allows to make additional variables available to templates. This allows you to write your custom Python class and functions, and easily bind them to your templates.</p><div class='annNotes'><div class='title'>notes</div><div class='content'></div></div><p>Starting from Tahchee 0.9.8, you can use extensions like <code>.tmpl.html</code> as well, instead of <code>html.tmpl</code>. This will make it easier for some editors to get the proper syntax highlighting.</p><p>This is however only available to <code>Pages</code>. General templates (those in <code>Templates</code>) have to stay as <code>.tmpl</code>. There are syntax coloring modes for Cheetah templates available in many text editors.</p><div class="section" level="2"><h2 class="heading"><span class="number"><span class="level0">4<span class="dot">.</span></span><span class="level1">1<span class="lastDot dot">.</span></span></span>Templates and the build process</h2><div class="level2"><p>Templates are "applied" (which means that they generate a file in the <code>Site</code> directory) under a set of conditions:</p><ul><li>They are not filtered out (see <code>ACCEPT</code> and <code>IGNORE</code> in site configuration) </li><li>The template or its parents were modified </li><li>The template was flagged with <code>ALWAYS_REBUILD</code> </li><li>A file state in a <code>DEPENDS</code> directive has changed</li></ul><p>If you want a template to be <em>always applied</em>, you should simply add the following line to the top of your template:</p><pre>## ALWAYS_REBUILD
#extends Templates.Page
...</pre><p>If you want to state an explicit dependency between your template and another file, simply put its absolute path or path from the template parent directory as follows:</p><pre>## DEPENDS = ../../path/to/my/file.data
#extends Templates.Page
...</pre><p>These indications will allow Tahchee to decide when something should be rebuilt or not. In case you would like to do that from the <code>Makefile</code>, you can invoke the <code>build.py</code> script directly with the page you want to rebuild:</p><pre>python build.py Pages/index.html.tmpl</pre></div></div></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">5<span class="lastDot dot">.</span></span></span>Using Kiwi markup</h1><div class="level1"><p>Since version 0.9.7, "Tahchee" comes integrated with the <span class='term'>Kiwi</span> markup language. Kiwi is a simple, expressive text markup language that allows to create XML/HTML documents without actually writing all the HTML tag. For instance</p><pre>Here is a paragraph, followed by a list:

1) The list is numbered
2) Here is the second item
   - Here is an unnumbered sublist
3) And the third item</pre><p>generates the following HTML code:</p><pre>&lt;p&gt;Here is a paragraph, followed by a list:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;The l ist is numbered &lt;/li&gt;
    &lt;li&gt;Here is the second item
        &lt;ul&gt;&lt;li&gt;Here is an unnumbered sublist&lt;/li&gt;&lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;And the third item&lt;/li&gt;
&lt;/ul&gt;</pre><p>Kiwi comes pre-installed with <span class='term'>tahchee</span>. To use it, simply process any of your variable with the <code>$kiwi' function. For instance, if your page template
contains a content section </code><div id='content'>$content</div><code> that holds your
page content, and that you expect `$content</code> to contain Kiwi text, simply use the following:</p><pre>&lt;div id="content"&gt;$kiwi($content)&lt;/div&gt;</pre><p>This will enable any content to be written in Kiwi. Also, note that with kiwi you can mix HTML (or XML) with Kiwi without any problem, so you can gradually convert your HTML files to Kiwi markup if you need to.</p><p>Kiwi is pretty much similar to <a href="http://daringfireball.net/projects/markdown/" class="external">Markdown</a>, but may be more powerful in some areas. You can learn more about Kiwi <a href="http://www.ivy.fr/kiwi" class="external">here</a>.</p></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">6<span class="lastDot dot">.</span></span></span>Configuration</h1><div class="level1"><p>Tahchee can be configured to meet your specific site setup. All the configuration should be made in the <code>build.py</code> file in your Tahchee website directory, which present you the available options.</p><p>Your website <code>build.py</code> contains a set of options that you can change and edit. These options should look like the following.</p><pre># You can change the following things
# =============================================================================
URL     = "www.ivy.fr/tahchee"
INDEXES = ["index.*"]
IGNORES = [".cvs", ".CVS", ".svn", ".DS_Store"]
ACCEPTS = []
# =============================================================================</pre><p>There are many configuration options available. Here is the complete list of supported options.</p><ul><li><code>URL</code> allows you to set the main URL from which your website will be accessed. This is useful when you want to generate a website with absolute links.</li></ul><ul><li><code>MAIN</code> indicates the relative path of the main HTML file for your website. This is usually <code>index.html</code>. When <code>SHOW_MAIN</code> is set, then the main file will be displayed in your browser after each build. (new in 0.9.8)</li></ul><ul><li><code>SHOW_MAIN</code> (can be <code>True</code> or <code>False</code>), indicate if you want your main page to be shown in your browser after each build. (new in 0.9.8)</li></ul><ul><li><code>INDEXES</code> is a set of "globs" (shell-like patterns) that tell which files should be considered as indexes. This also affects link expansion.</li></ul><ul><li><code>IGNORES</code> specifies a list of "globs" of files that should be ignored. These files will not be copied or processed. You can also give paths relative to the <code>Pages</code> directory.</li></ul><ul><li><code>ACCEPTS</code> specifies the list of "globs" that will be processed. You should leave this empty, as if you specify one <code>ACCEPT</code>, then everything not accepted will be ignored.</li></ul><ul><li><code>TIDY</code> indicates the path to the HTML tidy utility (it is auto-detected otherwise).</li></ul><ul><li><code>USE_TIDY</code> (takes <code>yes</code> or <code>no</code>, yes is the default), indicates if HTML tidy should be enabled or not.</li></ul><ul><li><code>TIDYFLAGS</code> specifies the flags that should be passed to HTML tidy. You can also use an environment variable with the same name.</li></ul><ul><li><code>TIDYCONF</code> specifies the configuration file that should be used by HTML tidy. You can also use an environment variable with the same name.</li></ul><ul><li><code>CHANGE</code> can be set to <code>date</code> to detect changes based on the file date and <code>sig</code> to detect changes based on the signature.</li></ul></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">7<span class="lastDot dot">.</span></span></span>Extending Tahchee</h1><div class="level1"><p>Tahchee can be very easily extended using its plugin system (since Tahchee 0.9.7).</p><p>Writing a plugin is very easy:</p><ul><li>Write your Python code independently </li><li>Wrap your classes/functions into a plugin that will make particular objects available to templates as variables (pretty much like the <code>$site</code> object) </li><li>Publish your plugins by putting them within the <code>Plugins</code> directory </li><li>Type <code>tahchee plugins</code> to make sure that your plugin was registered</li></ul><p>If you don't want to write plugins, you can alternatively drop some Python modules within the <code>Sources</code> directory of your Tahchee website (you have to create this directory, which is not created by default). Tahchee will then automatically add this directory to the Python path.</p><p>So, if you create a module in <code>Sources/mymodule.py</code>, you can use it in your page templates by doing:</p><pre>#import mymodule</pre><p>and then</p><pre>$mymodule.doSomething()...</pre><p>This is probably the easies way to extend Tahchee functionality.</p></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">8<span class="lastDot dot">.</span></span></span>Some advices</h1><div class="level1"><p>Tahchee can be very powerful, provided you do things with a little bit of discipline. Here is what I would advice :</p><ul><li>Spend some time thinking about your site map, and the type of pages that you want to have. </li><li>Do not write too many Templates, try to keep them minimal, and make a list of the variables names that will be filled by Pages. </li><li>Do not hesitate to use templates for your CSS files, as it can allow (among other things) to quickly change a set of predefined colors. </li><li>Cheetah templates allow to use any Python module, so do not hesitate to add extra functionality in Python modules that you can put just inside your <code>Templates</code> directory or anywhere in your PYTHONPATH. </li><li>Do not hesitate to write Plugins to provide custom functionalities (automatic generation of pages or linked data)</li></ul><p>I hope this small documentation will help you kickstart using Tahchee, if you have questions or comments, you can contact me at <a href="mailto:&#115;&#101;&#98;&#97;&#115;&#116;&#105;&#101;&#110;&#64;&#105;&#118;&#121;&#46;&#102;&#114;">&#115;&#101;&#98;&#97;&#115;&#116;&#105;&#101;&#110;&#64;&#105;&#118;&#121;&#46;&#102;&#114;</a>.</p></div></div></div></div>

</body>
</html>